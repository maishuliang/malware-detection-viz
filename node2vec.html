<!DOCTYPE html>
<head>



</head>

<body>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<link rel="stylesheet" type="text/css" href="node2vec.css">
<h2>Node2vec Embeddings Visualization with Different Meta-paths and Parameters</h2>
<table>
    <tr>
      <th></th>
      <th>p = 2, q = 2</th>
      <th>p = 2, q = 1/2</th>
      <th>p = 1/2, q = 2</th>
      <th>p = 1/2, q = 1/2</th>
    </tr>
    <tr>
        <th>AA</th>
      <td><div id="node2vec_AA1"></div></td>
      <td><div id="node2vec_AA2"></div></td>
      <td><div id="node2vec_AA3"></td>
      <td><div id="node2vec_AA4"></td>
    </tr>
    <tr>
        <th>ABA</th>
        <td><div id="node2vec_ABA1"></div></td>
        <td><div id="node2vec_ABA2"></div></td>
        <td><div id="node2vec_ABA3"></td>
        <td><div id="node2vec_ABA4"></td>
    </tr>
    <tr>
        <th>ABPBA</th>
      <td>TO BE COMPLETED</td>
      <td>TO BE COMPLETED</td>
      <td>TO BE COMPLETED</td>
      <td>TO BE COMPLETED</td>
    </tr>
  </table>
<script>
function plotEmbeddings(csv_location, container_div){
    var options = {chart: {

        type: 'scatter',
        zoomType: 'xy'
        },
        title: {
        text: 'Node2vec APP Embeddings after Dimension Reduction'
        },
        xAxis: {
        title: {
            enabled: true,
            text: 'tSNE Dimension 1'
        },
        startOnTick: true,
        endOnTick: true,
        showLastLabel: true
        },
        yAxis: {
        title: {
            text: 'tSNE Dimension 2'
        }
        },
        legend: {
        layout: 'vertical',
        align: 'left',
        verticalAlign: 'top',
        x: 100,
        y: 70,
        floating: true,
        backgroundColor: Highcharts.defaultOptions.chart.backgroundColor,
        borderWidth: 1
        },
        plotOptions: {
        scatter: {
            marker: {
                radius: 3,
                states: {
                    hover: {
                        enabled: true,
                        lineColor: 'rgb(100,100,100)'
                    }
                }
            },
            states: {
                hover: {
                    marker: {
                        enabled: false
                    }
                }
            },
            tooltip: {
                headerFormat: '<b>{series.name}</b><br>',
                pointFormat: '{point.x}, {point.y}'
            }
        }
        },
        series:[]}

    Highcharts.ajax({  
    url: csv_location,  
    dataType: 'text',  
    success: function(data) {  
        // Split the lines  
        var lines = data.split('\n');  
        var malware = {  
                    name: 'malware',
                    color: 'rgba(223, 83, 83, .5)',
                    data: []  
                };  
        var benign = {   
                    name: 'benign',
                    color: 'rgba(119, 152, 191, .5)',
                    data: []  
                }; 
        lines.forEach(function(line, lineNo) {  
            var items = line.split(',');  
            if(lineNo > 0) {  
                var temp = []
                items.forEach(function(item, itemNo) { 
                    
                    
                    if (itemNo == 0) {  
                        temp.push(parseFloat(item));
                    } else if (itemNo == 1) {  
                        temp.push(parseFloat(item));
                    }  
                    else if (itemNo == 2) {  
                        if (parseInt(item) == 1){
                            malware.data.push(temp);

                        }
                        else{
                            benign.data.push(temp);
                        }
                    } 
                });  
            }      
        });  
        options.series.push(malware);  
        options.series.push(benign);  
        console.log(malware);
        Highcharts.chart(container_div, options);  
    },  
    error: function (e, t) {  
        console.error(e, t);  
    }  
});
}




plotEmbeddings('assets/data/AA_len100_k10_p2_q2.csv', 'node2vec_AA1');
plotEmbeddings('assets/data/AA_len100_k10_p2_q0.5.csv', 'node2vec_AA2');
plotEmbeddings('assets/data/AA_len100_k10_p0.5_q2.csv', 'node2vec_AA3');
plotEmbeddings('assets/data/AA_len100_k10_p0.5_q0.5.csv', 'node2vec_AA4');

plotEmbeddings('assets/data/ABA_len100_k10_p2_q2.csv', 'node2vec_ABA1');
plotEmbeddings('assets/data/ABA_len100_k10_p2_q0.5.csv', 'node2vec_ABA2');
plotEmbeddings('assets/data/ABA_len100_k10_p0.5_q2.csv', 'node2vec_ABA3');
plotEmbeddings('assets/data/ABA_len100_k10_p0.5_q0.5.csv', 'node2vec_ABA4');
</script>

<script>
    function plotEmbeddings(csv_location, container_div){
        var options = {chart: {
    
            type: 'scatter',
            zoomType: 'xy'
            },
            title: {
            text: 'Metapath2vec APP Embeddings after Dimension Reduction'
            },
            xAxis: {
            title: {
                enabled: true,
                text: 'tSNE Dimension 1'
            },
            startOnTick: true,
            endOnTick: true,
            showLastLabel: true
            },
            yAxis: {
            title: {
                text: 'tSNE Dimension 2'
            }
            },
            legend: {
            layout: 'vertical',
            align: 'left',
            verticalAlign: 'top',
            x: 100,
            y: 70,
            floating: true,
            backgroundColor: Highcharts.defaultOptions.chart.backgroundColor,
            borderWidth: 1
            },
            plotOptions: {
            scatter: {
                marker: {
                    radius: 3,
                    states: {
                        hover: {
                            enabled: true,
                            lineColor: 'rgb(100,100,100)'
                        }
                    }
                },
                states: {
                    hover: {
                        marker: {
                            enabled: false
                        }
                    }
                },
                tooltip: {
                    headerFormat: '<b>{series.name}</b><br>',
                    pointFormat: '{point.x}, {point.y}'
                }
            }
            },
            series:[]}
    
        Highcharts.ajax({  
        url: csv_location,  
        dataType: 'text',  
        success: function(data) {  
            // Split the lines  
            var lines = data.split('\n');  
            var malware = {  
                        name: 'malware',
                        color: 'rgba(223, 83, 83, .5)',
                        data: []  
                    };  
            var benign = {   
                        name: 'benign',
                        color: 'rgba(119, 152, 191, .5)',
                        data: []  
                    }; 
            lines.forEach(function(line, lineNo) {  
                var items = line.split(',');  
                if(lineNo > 0) {  
                    var temp = []
                    items.forEach(function(item, itemNo) { 
                        
                        
                        if (itemNo == 0) {  
                            temp.push(parseFloat(item));
                        } else if (itemNo == 1) {  
                            temp.push(parseFloat(item));
                        }  
                        else if (itemNo == 2) {  
                            if (parseInt(item) == 1){
                                malware.data.push(temp);
    
                            }
                            else{
                                benign.data.push(temp);
                            }
                        } 
                    });  
                }      
            });  
            options.series.push(malware);  
            options.series.push(benign);  
            console.log(malware);
            Highcharts.chart(container_div, options);  
        },  
        error: function (e, t) {  
            console.error(e, t);  
        }  
    });
    }
    
    
    
    
    plotEmbeddings('assets/data/AA_metapath2vec_tSNE.csv', 'AA');
    plotEmbeddings('assets/data/ABA_metapath2vec_tSNE.csv', 'ABA');
    plotEmbeddings('assets/data/ABPBA_metapath2vec_tSNE.csv', 'ABPBA');
    </script>
</body>

