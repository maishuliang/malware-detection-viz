<!DOCTYPE html>
<head>



</head>

<body>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<link rel="stylesheet" type="text/css" href="node2vec.css">
<h2>Metapath2vec Embeddings Visualization with Different Meta-paths and Parameters</h2>
<table>
    <tr>
      <th>AA</th>
      <th>ABA</th>
      <th>ABPBA</th>
    </tr>
    <tr>
      <td><div id="AA"></div></td>
      <td><div id="ABA"></div></td>
      <td><div id="ABPBA"></td>
    </tr>
  </table>
<script>
function plotEmbeddings(csv_location, container_div){
    var options = {chart: {

        type: 'scatter',
        zoomType: 'xy'
        },
        title: {
        text: 'Metapath2vec APP Embeddings after Dimension Reduction'
        },
        xAxis: {
        title: {
            enabled: true,
            text: 'tSNE Dimension 1'
        },
        startOnTick: true,
        endOnTick: true,
        showLastLabel: true
        },
        yAxis: {
        title: {
            text: 'tSNE Dimension 2'
        }
        },
        legend: {
        layout: 'vertical',
        align: 'left',
        verticalAlign: 'top',
        x: 100,
        y: 70,
        floating: true,
        backgroundColor: Highcharts.defaultOptions.chart.backgroundColor,
        borderWidth: 1
        },
        plotOptions: {
        scatter: {
            marker: {
                radius: 3,
                states: {
                    hover: {
                        enabled: true,
                        lineColor: 'rgb(100,100,100)'
                    }
                }
            },
            states: {
                hover: {
                    marker: {
                        enabled: false
                    }
                }
            },
            tooltip: {
                headerFormat: '<b>{series.name}</b><br>',
                pointFormat: '{point.x}, {point.y}'
            }
        }
        },
        series:[]}

    Highcharts.ajax({  
    url: csv_location,  
    dataType: 'text',  
    success: function(data) {  
        // Split the lines  
        var lines = data.split('\n');  
        var malware = {  
                    name: 'malware',
                    color: 'rgba(223, 83, 83, .5)',
                    data: []  
                };  
        var benign = {   
                    name: 'benign',
                    color: 'rgba(119, 152, 191, .5)',
                    data: []  
                }; 
        lines.forEach(function(line, lineNo) {  
            var items = line.split(',');  
            if(lineNo > 0) {  
                var temp = []
                items.forEach(function(item, itemNo) { 
                    
                    
                    if (itemNo == 0) {  
                        temp.push(parseFloat(item));
                    } else if (itemNo == 1) {  
                        temp.push(parseFloat(item));
                    }  
                    else if (itemNo == 2) {  
                        if (parseInt(item) == 1){
                            malware.data.push(temp);

                        }
                        else{
                            benign.data.push(temp);
                        }
                    } 
                });  
            }      
        });  
        options.series.push(malware);  
        options.series.push(benign);  
        console.log(malware);
        Highcharts.chart(container_div, options);  
    },  
    error: function (e, t) {  
        console.error(e, t);  
    }  
});
}




plotEmbeddings('assets/data/AA_metapath2vec_tSNE.csv', 'AA');
plotEmbeddings('assets/data/ABA_metapath2vec_tSNE.csv', 'ABA');
plotEmbeddings('assets/data/ABPBA_metapath2vec_tSNE.csv', 'ABPBA');
</script>


</body>

