<!DOCTYPE html>



<!-- saved from url=(0068)https://www.turnwall.com/demos/webdev_part11/step4.html#section-five -->
<html class=" js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths" style=""><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
  <link rel="stylesheet" href="normalize.css">
  <link rel="stylesheet" href="main.css">
  <script src="analytics.js"></script><script src="modernizr-2.6.2.min.js"></script>
</head>
<body style="">

<!--[if lt IE 7]>
<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->


<!-- 
Add your site or application content here 
-->
<div id="top"></div>

<nav class="site-navigation page-navigation">
  <ul class="menu">
    <li><a href="https://maishuliang.github.io/malware-detection-viz/index.html#top">Top</a></li>
    <li><a href="https://maishuliang.github.io/malware-detection-viz/index.html#section-one">Introduction</a></li>
    <li><a href="https://maishuliang.github.io/malware-detection-viz/index.html#section-two">Research on Hindroid Paper</a></li>
    <li><a href="https://maishuliang.github.io/malware-detection-viz/index.html#section-three">Node2vec</a></li>
    <li><a href="https://maishuliang.github.io/malware-detection-viz/index.html#section-four">Metapath2Vec</a></li>
    <li><a href="https://maishuliang.github.io/malware-detection-viz/index.html#section-five">Five</a></li>
  </ul>
</nav>


<div class="gd-section pad-large grey"> 
  <div class="gd-center">
    <div class="row">
      <div class="col12">
        <h1>Malware Detection Visulization</h1>
        <h4>by Bo Zhang, Xuanyu Wu and Shuliang Mai</h4>
        <span class="button_container dark_popup">
          <div class="my_target" style="display: none;">
            Example 3: A larger kind of pop-up or modal
            <span class="close_button">close</span>
          </div>
        </span>
        <img src="assets/Android.png" style="margin:0px auto; text-align:center;width:40%" alt="Android Logo"/>
      </div>
    </div>
  </div>
</div>


<div id="section-one" class="gd-section pad-large"> 
  <div class="gd-center">
    <div class="row"> 
      <div class="col8">
        <h3>Introduction</h3>
        <p style="font-size: large; LINE-HEIGHT:35px;">Nowadays, Android is dominating the smartphone market as an open source and customizable operating system. 
          Many hackers targeted Android applications by disseminating malwares, posing serious threats to users. 
          Historically, mobile security products such as Norton and Lookout, are heavily relied upon as major defense against such threats. 
          Recently, many machine learning based methods have been invented for malware detection.
           A successful one of them is creating features from a Heterogeneous Information Network (HinDroid).
          However, it is confined in such a way that it ignores more comprehensive information which can be extracted from graph representation. 
          In this project, we will explore different meta-paths and incorporate various graph embedding methods in the task of malware prediction.
          We propose to build upon our previous work in HinDroid replication, more specifically we will attempt to use deep 
          learning graph embedding techniques. The success of this project will not only be determined by the performance of our final model but more 
          importantly the evaluation of different graph embedding methods and further reasoning on the result.</p>
      </div>
      <div class="col4">
        <span class="button_container">
          <span class="my_button"><a href="https://github.com/zhangbo1997/Graph-Based-Malware-Prediction" target="_blank">Code Repository</a></span>
        </span>
        <span class="button_container">
          <span class="my_button">Test Button 2</span>
          <div class="my_target" style="display: none;">Test Target 2 <span class="close_button">close</span></div>
        </span>
        <img src="assets/Android.png" style="margin:0px auto; text-align:center;width:70%" alt="Android Logo"/>
      </div>
    </div>
  </div>
  
</div>

<div id="section-two" class="gd-section pad-large"> 
  <div class="gd-center">
    <div class="row"> 
      <div class="col8">
        <h3>Research on Hindroid Paper </h3> 
        <h6><a href="https://www.cse.ust.hk/~yqsong/papers/2017-KDD-HINDROID.pdf" target="_blank">Jump to Hindroid Paper</a></h6>
        <p style="font-size: large; LINE-HEIGHT:35px;"> We have replicated the major parts of the Hindroid paper and trained the model with our own benign apps fetched from Apkpure[2]</p>
        <h5>Our replication results showed Below.</h5>
        <img src="assets/hindroid_result.png" style="margin:0px auto; text-align:center;width:100%" alt="Hindroid Replication Result"/>
       </br>
      </br>
        <p style="font-size: large; LINE-HEIGHT:35px;">The malware smali codes were obtained from the dataset provided by Prof. Aaron Fraenkel. Other than aforementioned data, the process to build the A, B, P matrix can be referred to Hindorid Paper[2]. Our plan is to develop based on the features from the HinDroid[1] method which uses a SVM with different customized kernels for classification, we try to extract the latent embeddings of APPs and APIs before building a classification model. The latent embeddings are generated from the metapath graphs using the same matrices (A, B, P) with node2vec and metapath2vec. Based on the EDA and plots with reduced dimensions below, we can see that the embedding method is on the right track and the source data is of high quality in classification. Before we jump into the latent embedding generated by node2vec, we first analyze how the HinDroid[1] method performs differently on different types of malwares.</p>
        <h5>Our Test Accuracy Rate on Different Malware Types Showed as Below</h5>
        <img src="assets/svm_by_types.png" style="margin:0px auto; text-align:center;width:130%" alt="Hindroid Replication Result"/>
    </br>
  </br>
        <p style="font-size: large; LINE-HEIGHT:35px;">With the verification of the different accuracy on different malware types. We proceed to research on the performances of graph embedding methods.</p>
      </div>
    </div>
  </div>
</div>

<div id="section-three" class="gd-section pad-large"> 
  <div class="gd-center">
    <div class="row"> 
      <div class="col8">
        <h2>Node2vec</h2>
        <h6><a href="https://cs.stanford.edu/~jure/pubs/node2vec-kdd16.pdf" target="_blank">Jump to Node2vec Paper</a></h6>
        <p style="font-size: large; LINE-HEIGHT:35px;">Node2vec is an algorithmic framework for learning continuous feature representations for nodes. In the algorithm, biased random walks are generated from the network, after which word2vec algorithm is applied to get embeddings for each node. Specifically, two parameters p and q are used while generating the random walks. If a random walk just traversed edge (t,v), the probability of transiting to the current node v’s neighbor x is 1/p if x is the same as t; 1 if there is an edge between t and x; 1/q if there is no direct relationship between t and x. </p>
        <p style="font-size: large; LINE-HEIGHT:35px;">With the HinDroid graph, we can try applying node2vec to get node embeddings. However, in order to incorporate the existing metapath information, we decided to generate random walks in a way that slightly differs from the original node2vec definition. In particular, at each node, depending on the current metapath and our position in the metapath, we only look at edges of a certain type and sample from certain neighbors. For example, if the metapath is ABAT, we should start from an APP, then from neighbors that have an edge type A with the current APP, randomly select an neighbor, in this case an API, based on the probability distribution defined in node2vec paper. After that, randomly select another API from the current API’s neighbors that connect with the current API with edge type B. Lastly, we select another APP from the API’s neighbors with edge type A. We can continue generating nodes and add them to the random walk. </p>
        
        <img src="assets/result_node2vec.png" style="margin:0px auto; text-align:center;width:100%" alt="Hindroid Replication Result"/>
      </br>
    </br>
        <p style="font-size: large; LINE-HEIGHT:35px;"> To understand the results better, we further did dimension reduction of APP embeddings and plot the 2-dimensional vectors to see how clustered malware and benign application embeddings are. As shown in Figure 4.1.1, malware and benign APP embeddings are well-separated. This means node2vec algorithm has successfully captured the difference between malware and benign applications from the HinDroid graph and the random walks we generated.</p>
        <link rel="stylesheet" type="text/css" href="node2vec.css">
        <h5>Node2vec Embeddings Visualization with Different Meta-paths and Parameters</h5>
        <table>
            <tr>
              <th></th>
              <th>p = 2, q = 2</th>
              <th>p = 2, q = 1/2</th>
              <th>p = 1/2, q = 2</th>
              <th>p = 1/2, q = 1/2</th>
            </tr>
            <tr>
                <th>AA</th>
              <td><div id="node2vec_AA1"></div></td>
              <td><div id="node2vec_AA2"></div></td>
              <td><div id="node2vec_AA3"></td>
              <td><div id="node2vec_AA4"></td>
            </tr>
            <tr>
                <th>ABA</th>
                <td><div id="node2vec_ABA1"></div></td>
                <td><div id="node2vec_ABA2"></div></td>
                <td><div id="node2vec_ABA3"></td>
                <td><div id="node2vec_ABA4"></td>
            </tr>
            <tr>
                <th>ABPBA</th>
              <td>TO BE COMPLETED</td>
              <td>TO BE COMPLETED</td>
              <td>TO BE COMPLETED</td>
              <td>TO BE COMPLETED</td>
            </tr>
          </table>
          <p style="font-size: large; LINE-HEIGHT:35px;"> Moreover, from the figure, we can see small clusters of malwares, and our initial guess is that each cluster corresponds to a certain type of malware.</p>
      </div>
    </div>
  </div>
</div>

<div id="section-four" class="gd-section pad-large"> 
  <div class="gd-center">
    <div class="row"> 
      <div class="col8">
        <h3>Metapath2Vec</h3>
        <p style="font-size: large; LINE-HEIGHT:35px;">Traditionally, conventional network embedding models, such as node2vec, work with homogeneous networks, which means that they treat all different types of nodes and relations the same. This will make heterogeneous nodes, such as App and API in our case, indistinguishable. metapath2vec is a network embedding model which aims to generate latent embeddings based on heterogeneous networks. Specifically, “metapath2vec maximizes the network probability in consideration of multiple types of nodes and edges”.[3] Similar to node2vec, the first step is to generate random walks in the heterogeneous network. Then, skip-gram model[4] will be applied to model the semantically and geographically close nodes. Similar to the logic of random walk for node2vec, meta-path-based random walks will be generated for the application of skip-gram models.</p>
        <p style="font-size: large; LINE-HEIGHT:35px;">In order to make comparison with node2vec, we generated random walks for the same three meta-paths: AAT, ABAT, and  ABPBTAT under the same dataset. Also, to make sure every APP appears at least once, we start from each APP and generate 200 random walks of max length 100. Then, metapath2vec is applied to these random walks to generate all types of node embeddings. By using these embeddings as feature representations and applying SVM linear kernel with “scale” gamma, the classification results are summarized in the following table. </p>
        <embed type="text/html" src="metapath2vec.html" width="500" height="200">
      </div>
    </div>
  </div>
</div>

<div id="section-five" class="gd-section pad-large"> 
  <div class="gd-center">
    <div class="row"> 
      <div class="col8">
        <h3>Section Five</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <h4><a href="https://maishuliang.github.io/malware-detection-viz/index.html#top">Back to Top</a></h4>
      </div>
    </div>
  </div>
</div>



<div class="gd-section footer">
  <h4>Footer</h4>
  <p>Example of a footer that is full-width. Content sits right to the edge of the screen.</p>
</div>




<!-- 
End Site Content 
-->

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<script>
function plotEmbeddings(csv_location, container_div){
    var options = {chart: {

        type: 'scatter',
        zoomType: 'xy'
        },
        title: {
        text: 'Node2vec APP Embeddings after Dimension Reduction'
        },
        xAxis: {
        title: {
            enabled: true,
            text: 'tSNE Dimension 1'
        },
        startOnTick: true,
        endOnTick: true,
        showLastLabel: true
        },
        yAxis: {
        title: {
            text: 'tSNE Dimension 2'
        }
        },
        legend: {
        layout: 'vertical',
        align: 'left',
        verticalAlign: 'top',
        x: 100,
        y: 70,
        floating: true,
        backgroundColor: Highcharts.defaultOptions.chart.backgroundColor,
        borderWidth: 1
        },
        plotOptions: {
        scatter: {
            marker: {
                radius: 3,
                states: {
                    hover: {
                        enabled: true,
                        lineColor: 'rgb(100,100,100)'
                    }
                }
            },
            states: {
                hover: {
                    marker: {
                        enabled: false
                    }
                }
            },
            tooltip: {
                headerFormat: '<b>{series.name}</b><br>',
                pointFormat: '{point.x}, {point.y}'
            }
        }
        },
        series:[]}

    Highcharts.ajax({  
    url: csv_location,  
    dataType: 'text',  
    success: function(data) {  
        // Split the lines  
        var lines = data.split('\n');  
        var malware = {  
                    name: 'malware',
                    color: 'rgba(223, 83, 83, .5)',
                    data: []  
                };  
        var benign = {   
                    name: 'benign',
                    color: 'rgba(119, 152, 191, .5)',
                    data: []  
                }; 
        lines.forEach(function(line, lineNo) {  
            var items = line.split(',');  
            if(lineNo > 0) {  
                var temp = []
                items.forEach(function(item, itemNo) { 
                    
                    
                    if (itemNo == 0) {  
                        temp.push(parseFloat(item));
                    } else if (itemNo == 1) {  
                        temp.push(parseFloat(item));
                    }  
                    else if (itemNo == 2) {  
                        if (parseInt(item) == 1){
                            malware.data.push(temp);

                        }
                        else{
                            benign.data.push(temp);
                        }
                    } 
                });  
            }      
        });  
        options.series.push(malware);  
        options.series.push(benign);  
        console.log(malware);
        Highcharts.chart(container_div, options);  
    },  
    error: function (e, t) {  
        console.error(e, t);  
    }  
});
}




plotEmbeddings('assets/data/AA_len100_k10_p2_q2.csv', 'node2vec_AA1');
plotEmbeddings('assets/data/AA_len100_k10_p2_q0.5.csv', 'node2vec_AA2');
plotEmbeddings('assets/data/AA_len100_k10_p0.5_q2.csv', 'node2vec_AA3');
plotEmbeddings('assets/data/AA_len100_k10_p0.5_q0.5.csv', 'node2vec_AA4');

plotEmbeddings('assets/data/ABA_len100_k10_p2_q2.csv', 'node2vec_ABA1');
plotEmbeddings('assets/data/ABA_len100_k10_p2_q0.5.csv', 'node2vec_ABA2');
plotEmbeddings('assets/data/ABA_len100_k10_p0.5_q2.csv', 'node2vec_ABA3');
plotEmbeddings('assets/data/ABA_len100_k10_p0.5_q0.5.csv', 'node2vec_ABA4');
</script>

</body></html>